- name: ðŸš€ Deploy to Fabric (DEV or PROD)
  if: always()
  env:
    FABRIC_CLIENT_ID: ${{ secrets.FABRIC_CLIENT_ID }}
    FABRIC_CLIENT_SECRET: ${{ secrets.FABRIC_CLIENT_SECRET }}
    FABRIC_TENANT_ID: ${{ secrets.FABRIC_TENANT_ID }}
  run: |
    if [ "${{ env.environment }}" = "dev" ]; then
      echo "Deploying to DEV..."
      python scripts/deploy-dev.py \
        --workspace "${{ env.workspace }}" \
        --capacity "${{ env.capacity }}" \
        --admin-upns "${{ env.admin_upns }}"
    else
      echo "Deploying to PROD..."
      python scripts/deploy-prd.py \
        --workspace "${{ env.workspace }}" \
        --capacity "${{ env.capacity }}" \
        --admin-upns "${{ env.admin_upns }}"
    fi
